<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mark.backend.mysql.mapper.UserExMapper">
	<select id="queryUserList" parameterType="java.util.Map"
		resultType="com.mark.backend.dto.UserDto">
		SELECT
		tu.id,
		tu.nickname AS nickName,
		tu.head_img_url AS headImage
		<if test="groupId != null">
			,
			CASE
			tgu.user_class
			WHEN '1' THEN
			TRUE
			ELSE
			FALSE
			END AS
			isLeader
		</if>
		FROM
		t_user tu
		<if test="groupId != null">
			,
			t_group_user tgu
			WHERE
			tu.id = tgu.user_id_fk
		</if>
	</select>
</mapper>